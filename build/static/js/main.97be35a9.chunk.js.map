{"version":3,"sources":["utils/consts.js","components/Navbar.jsx","components/Login.jsx","components/Loader.js","components/Chat.jsx","routes.js","components/AppRouter.jsx","App.js","index.js"],"names":["LOGIN_ROUTE","CHAT_ROUTE","Navbar","auth","useContext","Context","useAuthState","user","AppBar","color","position","Toolbar","variant","Grid","container","justifyContent","Button","onClick","signOut","to","Login","login","a","provider","firebase","GoogleAuthProvider","signInWithPopup","console","log","Container","style","height","window","innerHeight","alignItems","width","background","direction","Box","p","Loader","className","Chat","firestore","useState","value","setValue","useCollectionData","collection","orderBy","messages","loading","sendMessage","add","uid","displayName","photoURL","text","createdAt","FieldValue","serverTimestamp","justify","marginTop","border","overflowY","map","message","margin","marginLeft","padding","Avatar","src","TextField","fullWidth","rowsMax","onChange","e","target","publicRoutes","path","Component","privateRoutes","AppRouter","component","exact","App","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","createContext","root","document","getElementById","ReactDOM","render","Provider"],"mappings":"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","file":"static/js/main.97be35a9.chunk.js","sourcesContent":["export const LOGIN_ROUTE = 'real-time-chat/login'\nexport const CHAT_ROUTE = 'real-time-chat/chat'","import React, {useContext} from 'react';\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport {Button, Grid} from \"@material-ui/core\";\nimport {NavLink} from \"react-router-dom\";\nimport {LOGIN_ROUTE} from \"../utils/consts\";\nimport {Context} from \"../index\";\nimport {useAuthState} from \"react-firebase-hooks/auth\";\n\nconst Navbar = () => {\n    const {auth} = useContext(Context)\n    const [user] = useAuthState(auth)\n\n    return (\n        <AppBar color={\"secondary\"} position=\"static\">\n            <Toolbar variant={\"dense\"}>\n                <Grid container justifyContent={\"flex-end\"}>\n                    {user ?\n                        <Button onClick={() => auth.signOut()} variant={\"outlined\"}>Выйти</Button>\n                        :\n                        <NavLink to={LOGIN_ROUTE}>\n                            <Button variant={\"outlined\"}>Логин</Button>\n                        </NavLink>\n                    }\n                </Grid>\n            </Toolbar>\n        </AppBar>\n    );\n};\n\nexport default Navbar;","import React, {useContext} from 'react';\nimport {Button, Container, Grid} from \"@material-ui/core\";\nimport Box from \"@material-ui/core/Box\";\nimport {Context} from \"../index\";\nimport firebase from \"firebase\";\n\n\nconst Login = () => {\n    const {auth} = useContext(Context)\n\n    const login = async () => {\n        const provider = new firebase.auth.GoogleAuthProvider()\n        const {user} = await auth.signInWithPopup(provider)\n        console.log(user)\n    }\n\n    return (\n        <Container>\n            <Grid container\n                  style={{height: window.innerHeight - 50}}\n                  alignItems={\"center\"}\n                  justifyContent={\"center\"}\n            >\n                <Grid style={{width:400, background: 'lightgray'}}\n                      container\n                      alignItems={\"center\"}\n                      direction={\"column\"}\n                >\n                    <Box p={5}>\n                        <Button onClick={login} variant={\"outlined\"}>Войти с помощью Google</Button>\n                    </Box>\n                </Grid>\n            </Grid>\n        </Container>\n    );\n};\n\nexport default Login;","import React from 'react';\nimport {Button, Container, Grid, Box} from \"@material-ui/core\";\n\nexport default function Loader() {\n    return (\n        <Container>\n            <Grid container\n                  style={{height: window.innerHeight - 50}}\n                  alignItems={\"center\"}\n                  justifyContent={\"center\"}\n            >\n                <Grid\n                      container\n                      alignItems={\"center\"}\n                      direction={\"column\"}\n                >\n                    <div className=\"lds-roller\"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>\n                </Grid>\n            </Grid>\n        </Container>\n    );\n};\n","import React, {useContext, useState} from 'react';\nimport {Context} from \"../index\";\nimport {useAuthState} from \"react-firebase-hooks/auth\";\nimport {Avatar, Button, Container, Grid} from \"@material-ui/core\";\nimport TextField from \"@material-ui/core/TextField\";\nimport {useCollectionData} from \"react-firebase-hooks/firestore\";\nimport Loader from \"./Loader\";\nimport firebase from \"firebase\";\n\nconst Chat = () => {\n    const {auth, firestore} = useContext(Context)\n    const [user] = useAuthState(auth)\n    const [value, setValue] = useState('')\n    const [messages, loading] = useCollectionData(\n        firestore.collection('messages').orderBy('createdAt')\n    )\n\n    const sendMessage = async () => {\n        firestore.collection('messages').add({\n            uid: user.uid,\n            displayName: user.displayName,\n            photoURL: user.photoURL,\n            text: value,\n            createdAt: firebase.firestore.FieldValue.serverTimestamp()\n        })\n        setValue('')\n    }\n\n    if (loading) {\n        return <Loader/>\n    }\n\n    return (\n        <Container>\n            <Grid container\n                  justify={\"center\"}\n                  style={{height: window.innerHeight - 50, marginTop: 20}}>\n                <div style={{width: '80%', height: '60vh', border: '1px solid gray', overflowY: 'auto'}}>\n                    {messages.map(message =>\n                        <div style={{\n                            margin: 10,\n                            border: user.uid === message.uid ? '2px solid green' : '2px dashed red',\n                            marginLeft: user.uid === message.uid ? 'auto' : '10px',\n                            width: 'fit-content',\n                            padding: 5,\n                        }}>\n                            <Grid container>\n                                <Avatar src={message.photoURL}/>\n                                <div>{message.displayName}</div>\n                            </Grid>\n                            <div>{message.text}</div>\n                        </div>\n                    )}\n                </div>\n                <Grid\n                    container\n                    direction={\"column\"}\n                    alignItems={\"flex-end\"}\n                    style={{width: '80%'}}\n                >\n                    <TextField\n                        fullWidth\n                        rowsMax={2}\n                        variant={\"outlined\"}\n                        value={value}\n                        onChange={e => setValue(e.target.value)}\n                    />\n                    <Button onClick={sendMessage} variant={\"outlined\"}>Отправить</Button>\n                </Grid>\n            </Grid>\n        </Container>\n    );\n};\n\nexport default Chat;","import {CHAT_ROUTE, LOGIN_ROUTE} from \"./utils/consts\";\nimport Login from \"./components/Login\";\nimport Chat from \"./components/Chat\";\n\nexport const publicRoutes = [\n    {\n        path: LOGIN_ROUTE,\n        Component: Login\n    }\n]\n\nexport const privateRoutes = [\n    {\n        path: CHAT_ROUTE,\n        Component: Chat\n    }\n]","import React, {useContext} from 'react';\nimport {Route, Switch, Redirect} from 'react-router-dom'\nimport {privateRoutes, publicRoutes} from \"../routes\";\nimport {CHAT_ROUTE, LOGIN_ROUTE} from \"../utils/consts\";\nimport {useAuthState} from \"react-firebase-hooks/auth\";\nimport {Context} from \"../index\";\n\nconst AppRouter = () => {\n    const {auth} = useContext(Context)\n    const [user] = useAuthState(auth)\n\n    return user ?\n        (\n            <Switch>\n                {privateRoutes.map(({path, Component}) =>\n                    <Route key={path} path={path} component={Component} exact={true}/>\n                )}\n                <Redirect to={CHAT_ROUTE}/>\n            </Switch>\n        )\n        :\n        (\n            <Switch>\n                {publicRoutes.map(({path, Component}) =>\n                    <Route key={path} path={path} component={Component} exact={true}/>\n                )}\n                <Redirect to={LOGIN_ROUTE}/>\n            </Switch>\n        )\n};\n\nexport default AppRouter;","import React, {useContext} from 'react';\nimport {BrowserRouter} from 'react-router-dom'\nimport Navbar from \"./components/Navbar\";\nimport AppRouter from \"./components/AppRouter\";\nimport './index.css'\nimport {Context} from \"./index\";\nimport {useAuthState} from \"react-firebase-hooks/auth\";\nimport Loader from \"./components/Loader\";\n\nconst App = () => {\n    const {auth} = useContext(Context)\n    const [user, loading, error] = useAuthState(auth)\n\n    if (loading) {\n        return <Loader/>\n    }\n\n    return (\n        <BrowserRouter>\n            <Navbar/>\n            <AppRouter/>\n        </BrowserRouter>\n    );\n};\n\nexport default App;","import React, {useContext, createContext} from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport firebase from 'firebase'\nimport 'firebase/firestore'\nimport 'firebase/auth'\n\nfirebase.initializeApp({\n  apiKey: \"AIzaSyAqNmNUUuDGYrCCtRvLVxjsB2_xeGEqEP0\",\n  authDomain: \"chat-react-742bd.firebaseapp.com\",\n  projectId: \"chat-react-742bd\",\n  storageBucket: \"chat-react-742bd.appspot.com\",\n  messagingSenderId: \"39584229996\",\n  appId: \"1:39584229996:web:ab4d472d03f712e5c80649\",\n  measurementId: \"G-XY1MN3ZLEE\"\n})\n\nexport const Context = createContext(null)\n\nconst auth = firebase.auth()\nconst firestore = firebase.firestore()\n\n\nconst root = document.getElementById('root')\n\nReactDOM.render(\n  <Context.Provider value={{\n    firebase, \n    auth, \n    firestore\n  }}>\n    <App />\n  </Context.Provider>,\n  root\n);"],"sourceRoot":""}